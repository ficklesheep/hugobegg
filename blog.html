<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Hugo Begg Blog</title>
  <link rel="stylesheet" href="/style.css" />
</head>
<body>

  <header class="header">
    <div class="header__column header__column--1">
      <a href="/">
        <div class="logo">
          <img src="/images/Logo.png" alt="Logo">
        </div>
      </a>
    </div>
    <div class="header__column header__column--2">
      <nav class="menu">
        <div class="menu-btn">
          <div class="menu-btn-burger"></div>
        </div>
        <ol>
          <li><a href="/gallery/street.html">STREET</a></li>
          <li><a href="/gallery/landscapes.html">LANDSCAPE</a></li>
          <li><a href="/gallery/travel.html">TRAVEL</a></li>
          <li><a href="/gallery/film.html">FILM</a></li>
          <li><a href="/about.html">ABOUT</a></li>
          <li><a href="https://www.instagram.com/hugobegg/" target="_blank"><img src="/images/symbols/instagram.webp" alt="Instagram" width="20"></a></li>
        </ol>
      </nav>
    </div>
  </header>

  <main class="blog-container">

    <!-- Blog post grid -->
    <div id="blog-grid" class="blog-grid"></div>

    <!-- Blog content area -->
    <div id="blog-content" class="blog-content" style="display: none;">
      <button id="back-button">← Back to posts</button>
      <img id="post-image" class="post-image" />
      <h2 class="post-title" id="post-title"></h2>
      <p class="post-date" id="post-date"></p>
      <div class="post-content" id="post-content"></div>
    </div>
  </main>

  <footer class="footer">
    <div class="footer__content footer__content--1">
      <ol class="site__map">
        <li><a href="/index">Home</a></li>
        <li><a href="/about">About</a></li>
        <li><a href="/contact">Contact</a></li>
        <li><a href="/gallery/index">Gallery</a></li>
        <li><a href="/portfolio/index">Portfolio</a></li>
      </ol>
    </div>
    <div class="footer__content footer__content--2">
      <ol class="site__map site__map--gallery">
        Gallery links:
        <a href="/gallery/film"><b>Film</b></a> |
        <a href="/gallery/portraits"><b>Portraits</b></a> |
        <a href="/gallery/street"><b>Street</b></a> |
        <a href="/gallery/landscapes"><b>Landscapes</b></a> |
        <a href="/gallery/architecture"><b>Architecture</b></a>
        <br><br><br>All photographic content &copy; 2023 Hugo Begg Photography<br>Website design by <strong>Hugo Begg</strong>
      </ol>
    </div>
    <div class="footer__content footer__content--3">
      <a href="https://www.instagram.com/hugobegg/"><img src="/images/instagram.png" alt="Instagram" style="filter: invert(100); width: 30px;"></a>
      <a href="#top" class="return-to-top"><u>Return to top</u> ↑</a>
    </div>
  </footer>

  <script>
    let postsData = [];

    fetch('/public/posts.json')
      .then(response => response.json())
      .then(posts => {
        postsData = posts;
        const grid = document.getElementById('blog-grid');

        posts.forEach((post, index) => {
  const card = document.createElement('div');
  card.className = 'post-card';

  // Cover image if available
  const img = document.createElement('img');
img.className = 'post-card-image';

if (post.image) {
  if (!post.image.startsWith('http') && !post.image.startsWith('/')) {
    img.src = '/static/bloguploads/' + post.image;
  } else {
    img.src = post.image;
  }
  img.alt = post.title + " cover image";
} else {
  // No image found, use a placeholder or leave empty
  img.src = '/static/bloguploads/placeholder.jpg';  // <-- optional placeholder image path
  img.alt = 'No image available';
}

card.appendChild(img);



card.appendChild(img);


  const body = document.createElement('div');
  body.className = 'post-card-body';

  const title = document.createElement('div');
  title.className = 'post-card-title';
  title.textContent = post.title;

  const date = new Date(post.date);
  const dateEl = document.createElement('div');
  dateEl.className = 'post-card-date';
  dateEl.textContent = isNaN(date) ? '' : date.toLocaleDateString();

  const btn = document.createElement('button');
  btn.className = 'read-more-btn';
  btn.textContent = 'Read more';
  btn.addEventListener('click', () => showPost(index));

  body.appendChild(title);
  body.appendChild(dateEl);
  body.appendChild(btn);

  card.appendChild(body);
  grid.appendChild(card);
});

      });

    function showPost(index) {
  const post = postsData[index];
  const imageEl = document.getElementById('post-image');

  console.log('post.image:', post.image);

  // Adjust this depending on your post.image value
  if (post.image) {
    // If post.image is just a filename, prepend folder
    if (!post.image.startsWith('http') && !post.image.startsWith('/')) {
      imageEl.src = '/static/bloguploads/' + post.image;
    } else {
      imageEl.src = post.image;
    }
    imageEl.alt = post.title + ' image';
  } else {
    imageEl.src = '';
    imageEl.alt = '';
  }

  document.getElementById('post-title').textContent = post.title;

  const date = new Date(post.date);
  document.getElementById('post-date').textContent = isNaN(date) ? '' : date.toLocaleDateString();

  document.getElementById('post-content').innerHTML = post.content || '';


  document.getElementById('blog-grid').style.display = 'none';
  document.getElementById('blog-content').style.display = 'block';
  
  
}
document.getElementById('back-button').addEventListener('click', () => {
  document.getElementById('blog-content').style.display = 'none';
  document.getElementById('blog-grid').style.display = 'grid'; // or 'block' if you prefer
});

  </script>

</body>
</html>
